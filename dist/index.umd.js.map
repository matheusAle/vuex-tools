{"version":3,"file":"index.umd.js","sources":["../src/buildStore.ts","../src/createModule.ts","../src/createStore.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport Vue from 'vue';\nimport Vuex, { Store } from 'vuex';\nimport type { ModuleBuilder, Module } from './types';\n\nexport function buildStore<R>(\n  root: ModuleBuilder<R, unknown>,\n  state: R,\n  modules: Module<any, R>[] = [],\n): Store<R> {\n  Vue.use(Vuex);\n  const store = root.getModule(state);\n\n  return new Store<R>({\n    state: store.state,\n    getters: store.getters,\n    actions: store.actions,\n    mutations: store.mutations,\n    modules: modules.reduce((acc, m) => {\n      acc[m.name] = m;\n      return acc;\n    }, {}),\n  });\n}\n","import type { Getter } from 'vuex';\nimport type { ModuleBuilder, Mutation, ActionHandler } from './types';\n\nconst actionCreator = <P>(moduleName: string, type: string) => (\n  payload: P,\n) => ({ type: moduleName ? `${moduleName}/${type}` : type, payload });\n\nexport function createModule<S, R = unknown>(\n  moduleName = '',\n): ModuleBuilder<S, R> {\n  const mutations: Mutation<S, unknown>[] = [];\n  const actions: ActionHandler<S, R, unknown>[] = [];\n  const getters: Getter<S, R>[] = [];\n  return {\n    mutation<P>(type: string, fn: Mutation<S, P>) {\n      fn.toString = () => `${type}`;\n      (mutations as Mutation<S, P>[]).push(fn);\n      return actionCreator<P>(moduleName, type);\n    },\n    action<P>(type: string, fn: ActionHandler<S, R, P>) {\n      fn.toString = () => `${type}`;\n      (actions as ActionHandler<S, R, P>[]).push(fn);\n      return actionCreator<P>(moduleName, type);\n    },\n    getter<P>(type: string, fn: Getter<S, R>) {\n      fn.toString = () => `${type}`;\n      getters.push(fn);\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      return (gatter: any): P =>\n        gatter[`${moduleName}/${type}`] || gatter[type];\n    },\n    getModule(state: S) {\n      return {\n        name: moduleName,\n        namespaced: true,\n        state,\n        actions: actions.reduce((acc, action) => {\n          acc[action.toString()] = (store, { payload = null }) => {\n            action(store, payload);\n          };\n          return acc;\n        }, {}),\n        mutations: mutations.reduce((acc, mutation) => {\n          acc[mutation.toString()] = (store, { payload }) =>\n            mutation(store, payload);\n          return acc;\n        }, {}),\n        getters: getters.reduce((acc, getter) => {\n          acc[getter.toString()] = getter;\n          return acc;\n        }, {}),\n      };\n    },\n  };\n}\n","import { createModule } from './createModule';\nimport type { ModuleBuilder } from './types';\n\nexport function createStore<S>(): ModuleBuilder<S, unknown> {\n  return createModule<S, unknown>('');\n}\n"],"names":["Vue","Vuex","Store"],"mappings":"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"}