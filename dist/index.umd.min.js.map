{"version":3,"file":"index.umd.min.js","sources":["../src/createModule.ts","../src/buildStore.ts","../src/createStore.ts"],"sourcesContent":["import type { Getter } from 'vuex';\nimport type { ModuleBuilder, Mutation, ActionHandler } from './types';\n\nconst actionCreator = <P>(moduleName: string, type: string) => (\n  payload: P,\n) => ({ type: moduleName ? `${moduleName}/${type}` : type, payload });\n\nexport function createModule<S, R = unknown>(\n  moduleName = '',\n): ModuleBuilder<S, R> {\n  const mutations: Mutation<S, unknown>[] = [];\n  const actions: ActionHandler<S, R, unknown>[] = [];\n  const getters: Getter<S, R>[] = [];\n  return {\n    mutation<P>(type: string, fn: Mutation<S, P>) {\n      fn.toString = () => `${type}`;\n      (mutations as Mutation<S, P>[]).push(fn);\n      return actionCreator<P>(moduleName, type);\n    },\n    action<P>(type: string, fn: ActionHandler<S, R, P>) {\n      fn.toString = () => `${type}`;\n      (actions as ActionHandler<S, R, P>[]).push(fn);\n      return actionCreator<P>(moduleName, type);\n    },\n    getter<P>(type: string, fn: Getter<S, R>) {\n      fn.toString = () => `${type}`;\n      getters.push(fn);\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      return (gatter: any): P =>\n        gatter[`${moduleName}/${type}`] || gatter[type];\n    },\n    getModule(state: S) {\n      return {\n        name: moduleName,\n        namespaced: true,\n        state,\n        actions: actions.reduce((acc, action) => {\n          acc[action.toString()] = (store, { payload = null }) => {\n            action(store, payload);\n          };\n          return acc;\n        }, {}),\n        mutations: mutations.reduce((acc, mutation) => {\n          acc[mutation.toString()] = (store, { payload }) =>\n            mutation(store, payload);\n          return acc;\n        }, {}),\n        getters: getters.reduce((acc, getter) => {\n          acc[getter.toString()] = getter;\n          return acc;\n        }, {}),\n      };\n    },\n  };\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport Vue from 'vue';\nimport Vuex, { Store } from 'vuex';\nimport type { ModuleBuilder, Module } from './types';\n\nexport function buildStore<R>(\n  root: ModuleBuilder<R, unknown>,\n  state: R,\n  modules: Module<any, R>[] = [],\n): Store<R> {\n  Vue.use(Vuex);\n  const store = root.getModule(state);\n\n  return new Store<R>({\n    state: store.state,\n    getters: store.getters,\n    actions: store.actions,\n    mutations: store.mutations,\n    modules: modules.reduce((acc, m) => {\n      acc[m.name] = m;\n      return acc;\n    }, {}),\n  });\n}\n","import { createModule } from './createModule';\nimport type { ModuleBuilder } from './types';\n\nexport function createStore<S>(): ModuleBuilder<S, unknown> {\n  return createModule<S, unknown>('');\n}\n"],"names":["actionCreator","moduleName","type","payload","createModule","mutations","actions","getters","mutation","fn","toString","push","action","getter","gatter","getModule","state","name","namespaced","reduce","acc","store","_a","_b","root","modules","Vue","use","Vuex","Store","m"],"mappings":";;;;;wZAGA,IAAMA,EAAgB,SAAIC,EAAoBC,GAAiB,OAAA,SAC7DC,GACG,OAAGD,KAAMD,EAAgBA,MAAcC,EAASA,EAAMC,sBAE3CC,EACdH,gBAAAA,MAEA,IAAMI,EAAoC,GACpCC,EAA0C,GAC1CC,EAA0B,GAChC,MAAO,CACLC,SAAA,SAAYN,EAAcO,GAGxB,OAFAA,EAAGC,SAAW,WAAM,MAAA,GAAGR,GACtBG,EAA+BM,KAAKF,GAC9BT,EAAiBC,EAAYC,IAEtCU,OAAA,SAAUV,EAAcO,GAGtB,OAFAA,EAAGC,SAAW,WAAM,MAAA,GAAGR,GACtBI,EAAqCK,KAAKF,GACpCT,EAAiBC,EAAYC,IAEtCW,OAAA,SAAUX,EAAcO,GAItB,OAHAA,EAAGC,SAAW,WAAM,MAAA,GAAGR,GACvBK,EAAQI,KAAKF,GAEN,SAACK,GACN,OAAAA,EAAUb,MAAcC,IAAWY,EAAOZ,KAE9Ca,UAAA,SAAUC,GACR,MAAO,CACLC,KAAMhB,EACNiB,YAAY,EACZF,QACAV,QAASA,EAAQa,QAAO,SAACC,EAAKR,GAI5B,OAHAQ,EAAIR,EAAOF,YAAc,SAACW,EAAOC,OAAEC,YACjCX,EAAOS,aADoC,SAGtCD,IACN,IACHf,UAAWA,EAAUc,QAAO,SAACC,EAAKZ,GAGhC,OAFAY,EAAIZ,EAASE,YAAc,SAACW,EAAOC,OAAEnB,YACnC,OAAAK,EAASa,EAAOlB,IACXiB,IACN,IACHb,QAASA,EAAQY,QAAO,SAACC,EAAKP,GAE5B,OADAO,EAAIP,EAAOH,YAAcG,EAClBO,IACN,6BC5CTI,EACAR,EACAS,gBAAAA,MAEAC,UAAIC,IAAIC,WACR,IAAMP,EAAQG,EAAKT,UAAUC,GAE7B,OAAO,IAAIa,QAAS,CAClBb,MAAOK,EAAML,MACbT,QAASc,EAAMd,QACfD,QAASe,EAAMf,QACfD,UAAWgB,EAAMhB,UACjBoB,QAASA,EAAQN,QAAO,SAACC,EAAKU,GAE5B,OADAV,EAAIU,EAAEb,MAAQa,EACPV,IACN,iDCjBL,OAAOhB,EAAyB"}